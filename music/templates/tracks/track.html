{% extends 'layout.html' %}

{% block content %}
    <h2>{{track.title}}</h2>
    <table class="individual_track">
        <tr class="table__row">
            <tr>
                <td class="table__cell__individual">ID</td>
                <td class="table__cell__individual">{{track.track_id}}</td>
            </tr>
            <tr>
                <td class="table__cell__individual">Track Title</td>
                <td class="table__cell__individual">{{track.title}}</td>
            </tr>
            <tr>
                <td class="table__cell__individual">Artist</td>
                <td class="table__cell__individual">{{track.artist.full_name}}</td>
            </tr>
            <tr>
                <td class="table__cell__individual">Album</td>
                <td class="table__cell__individual">{{track.album.title}}</td>
            </tr>
            <tr>
                <td class="table__cell__individual">Genres</td>
                {% for genre in track.genres %}
                <td class="table__cell__individual">{{genre}}</td>
                {% endfor %}
            </tr>
            <tr>
                <td class="table__cell__individual">Duration</td>
                <td class="table__cell__individual">{{track.track_duration}}</td>
            </tr>
            <tr>
                <td class="table__cell__individual">Url</td>
                <td class="table__cell__individual"><a href="{{track.track_url}}">{{track.title}}</a></td>
            </tr>
        </tr>
    </table>

    <div class="reviews">
        <h2>Reviews</h2>
            {% for review in reviews %}
            <div style="width: 20%; float:left">
                <p>{{review.user}}</p>
             </div>
             <div style="width: 80%; float:right">
                <p>{{review.review_text}}</p>
                <p>{{review.rating}}</p>
                <p>{{review.timestamp}}</p>
             </div>
            

            {% endfor %}
    </div>
</div>
    
    {% if logged_in == True %}
        <div class="form-wrapper">
            <form action="{{handler_url}}" method="post">
                {{form.csrf_token}}
                <br>
    
                <div class="form-field">
                    {{form.review.label}} </br>{{form.review(size = 100, placeholder="type your review", class="textarea", cols="50", rows="6", wrap="hard")}}
                    {{form.rating.label}} {{form.rating(size = 1, placeholder="your rating 1-5", class="textarea", cols="1", rows="1")}}
                    {% if form.review.errors or form.rating.errors %}
                    <ul class="errors">
                        {% for error in form.review.errors %}
                        <li>{{error}}</li>
                        {% endfor %}
                        {% for error in form.rating.errors %}
                        <li>{{error}}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
                {{form.submit}}
            </form>
        </div>
    {% endif %}

{% endblock %}